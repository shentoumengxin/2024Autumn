# Principle of Database

## Windows function

（partition by country ）:按照country进行分区，但是不会合并，分开

（group by country ) ：按照country 分区，且会把相同country列合并

### 聚合函数 vs 窗口函数

| 比较点             | 聚合函数                                      | 窗口函数                                                |
| ------------------ | --------------------------------------------- | ------------------------------------------------------- |
| **计算范围**       | 对一组数据进行汇总并返回单个结果              | 保留每一行的数据，并对该行及其“窗口”内的数据进行计算    |
| **典型应用**       | `GROUP BY` 分组汇总，计算每组的总数、平均数等 | 在行的基础上添加排名、累计和相邻行比较等结果            |
| **结果行数**       | 将多行数据合并为一行输出                      | 不改变行数，保留所有原始行                              |
| **使用场景**       | 汇总、统计，如部门平均工资、总销售额等        | 需要对每行及其相邻数据进行计算，如排名、累计和差值      |
| **支持的函数类型** | `SUM()`、`AVG()`、`COUNT()`等                 | 除聚合函数外，还有 `ROW_NUMBER()`、`RANK()`、`LAG()` 等 |