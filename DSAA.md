# <b>DSAA</b>

## My viewpoints

é€’å½’å…³é”®çš„ç†è§£æ˜¯é€’å½’æ ‘å’Œæ ˆã€‚

åœ¨é€’å½’å‡½æ•°åé¢çš„å†…å®¹ä¼šè¢«å‹å…¥æ ˆä¸­ï¼Œä»returnå¼€å§‹å¯¹ä»£ç ä»æ·±åº¦ä¸Šå¾€ä¸Šä¸€å±‚ä¸€å±‚å‘ä¸Šæ‰§è¡Œã€‚è€Œè°ƒç”¨é€’å½’å‡½æ•°çš„å‰é¢çš„éƒ¨åˆ†æ˜¯ä»ä¸Šå‘ä¸‹æ‰§è¡Œçš„ï¼Œ

æ€»ç»“æ¥è¯´ï¼Œæ­£ç¡®çš„ç†è§£æ˜¯ï¼š

- åœ¨é€’å½’è°ƒç”¨æ—¶ï¼Œæ ˆé¡¶çš„å‡½æ•°è°ƒç”¨ä¼šâ€œç­‰å¾…â€é€’å½’è°ƒç”¨è¿”å›åæ‰ä¼šç»§ç»­æ‰§è¡Œã€‚å³**ç»§æ‰¿**ä¸Šä¸€å‡½æ•°çš„çŠ¶æ€ã€‚
- é€’å½’å‡½æ•°è°ƒç”¨å‰çš„ä»£ç æ˜¯æŒ‰â€œè‡ªä¸Šè€Œä¸‹â€çš„é¡ºåºæ‰§è¡Œçš„ï¼Œé€’å½’å‡½æ•°è°ƒç”¨åçš„ä»£ç åˆ™æŒ‰â€œè‡ªä¸‹è€Œä¸Šâ€çš„é¡ºåºæ‰§è¡Œï¼ˆå³ä»æœ€æ·±çš„é€’å½’è¿”å›å¹¶é€å±‚å‘ä¸Šæ‰§è¡Œï¼‰ã€‚

## Binary Search

äºŒåˆ†æŸ¥æ‰¾æœ€å…³é”®çš„æ˜¯ç¡®å®šè¾¹ç•Œæ¡ä»¶ï¼è¦æƒ³æ¸…æ¥šé‡åˆ°ç›¸åŒçš„è¢«æŸ¥æ‰¾çš„æ•°å’Œç›¸é‚»æ—¶åº”è¯¥æ€ä¹ˆå¤„ç†

```cpp
while(left<right){  //æ‰¾åˆ°æ•°ç»„ä¸­æœ€æ¥è¿‘xçš„æœ€é å³çš„å·¦è¾¹ç•Œã€‚
            int mid=((left+right)+1)>>1;   //å‘ä¸Šå–æ•´ é˜²æ­¢æ— é™å¾ªç¯
            if(a[mid]<x){
                left=mid;        
            }
            else if(a[mid]==x){
                left=mid;     //å› ä¸ºå‘ä¸‹å–æ•´çš„æ—¶å€™ï¼Œç›¸é‚»æ—¶leftæ²¡æœ‰å‰è¿›ï¼Œä¼šæ— é™å¾ªç¯
            }
            else if(a[mid]>x){
                right=mid-1;  
            }
        }
        left=1,right=N;
        while(left<right){  //æœ€æ¥è¿‘yçš„æœ€é å·¦çš„å³è¾¹ç•Œã€‚
            int mid=(left+right)>>1;  
            if(a[mid]<y){      //å› ä¸ºåé¢æ˜¯+1æ‰€ä»¥ä¸ç”¨å‘ä¸Šå–æ•´
                left=mid+1;
            }
            else if(a[mid]==y){
                right=mid;
            }
            else if(a[mid]>y){
                right=mid;
            }
        }
//äºŒè€…æœ€å…³é”®çš„åŒºåˆ«æ˜¯é‡åˆ°==æ—¶çš„å¤„ç†æ–¹æ³•ï¼Œå’Œå·¦å³é‚£è¾¹å¤šç§»åŠ¨ä¸€æ ¼
```



## Sort

### O(n) Algorithms

#### Selection sort

æ¯ä¸€æ¬¡éå†æœªæ’åºçš„æ•°ç»„ï¼Œæ‰¾å‡ºæœ€å°å€¼æ”¾åœ¨æ’å¥½çš„ä½ç½®ä¸Š

1. for integer T <- 1 to n-1  O(n)

2. k<- i

3. for integer integer j <- i+1 to n  ---O(n^2^)

      if A[k] > A[j] then 

   â€‹	k<-j

4. swap A[i] and A[k]

 #### Insertion sort

éå†æ•°ç»„æ¯ä¸€ä¸ªå€¼ï¼Œå°†æ¯ä¸ªå…ƒç´ æ”¾åˆ°æ’å¥½çš„æ•°ç»„åˆé€‚çš„ä½ç½®(Online algorithm)

1. for integer 1 -> n    --O(n)

2. for integer j <- i to 1 (j>1)   --O(n^2^)

   â€‹	if A[j-1]>A[j]

   â€‹		swap A[j-1] and A[j]

   â€‹	else break 

#### Bubble sort

1. for integer i from 1 to n-1

2. â€‹	for integer j 1 to n-i       ---<b>O(n^2^)</b>

   â€‹		if A[j]>A[j+1]

   â€‹			swap A[j+1] and A[j]

bonus 7 8 9 5 4 1 3 6 æœ€ä¼˜æ’åºæ–¹æ³•

### **O(n(log~n~)) Algorithm**

#### Merge Sort (å½’å¹¶æ’åº)

<b>Divade-and-comquer</b>

**å½’å¹¶æ’åºçš„ç‰¹ç‚¹ï¼š** å½’å¹¶æ’åºåœ¨åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„çš„è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥æ–¹ä¾¿åœ°ç»Ÿè®¡é€†åºå¯¹çš„æ•°é‡ã€‚

1. ä¼ªä»£ç 

   ```cpp
   if n>1
   	p <- [n/2]
   	B[1â€¦p] <- A[1â€¦p]
   	C[1â€¦n-p] <- A[p+1â€¦n]
   â€”divide
   â€”combine
   	merge-sort(B,P)
   	merge sort (C,n-P)
   	A<- combine(B,C,p,n-p)
   ```

   

2. **Combine**?

   ç”¨ i,j,k ä¸‰ä¸ªæŒ‡é’ˆæ ‡è®°ä¸¤ä¸ªæ•°ç»„å’Œç›®æ ‡æ•°ç»„ï¼Œå¹¶æ ¹æ®å¤§å°å…³ç³»è¿›è¡Œç§»åŠ¨ï¼Œåœ¨ä¸€ä¸ªæ•°ç»„å®Œæˆè¿›å…¥åï¼Œä¸€å®šè¦å¯¹å¦ä¸€ä¸ªæ•°ç»„ä¹Ÿè¿›è¡Œå½’å…¥

   

   

  **3.é€’å½’æ‹†åˆ†**

- ```
  merge_sort(a, 1, 3);
  ```

  - ```
    merge_sort(a, 1, 2);
    ```

    - `merge_sort(a, 1, 1);` ï¼ˆè¿”å›ï¼‰
    - `merge_sort(a, 2, 2);` ï¼ˆè¿”å›ï¼‰
    - åˆå¹¶ `a[1..1]` å’Œ `a[2..2]`

  - `merge_sort(a, 3, 3);` ï¼ˆè¿”å›ï¼‰

  - åˆå¹¶ `a[1..2]` å’Œ `a[3..3]`

- ```
  merge_sort(a, 4, 5);
  ```

  - `merge_sort(a, 4, 4);` ï¼ˆè¿”å›ï¼‰
  - `merge_sort(a, 5, 5);` ï¼ˆè¿”å›ï¼‰
  - åˆå¹¶ `a[4..4]` å’Œ `a[5..5]`

- åˆå¹¶ `a[1..3]` å’Œ `a[4..5]`



### **Master Theorem(ä¸»å®šç†)**

â€‹	<big>**$T(n)=\alpha T(\lceil \frac{n}{\beta} \rceil)+O(n^r)  (n\geq2) $**</big>

â€‹	$if(log_{\beta}{\alpha}<r),T(n)=O(n^r)$

â€‹	$if(log_{\beta}{\alpha}=r),T(n)=O(n^rlog{n})$

â€‹	$if(log_{\beta}{\alpha}>r),T(n)=O(n^{log_\beta{\alpha}})$

â€‹	

#### Heap Sort(Binary tree)

### Quick Sort ï¼ˆA[1â€¦n,lo=i,hi=n]ï¼‰

#### How to Achieve

1. Random pick an integer pivot in A

2. æŠŠæ•°ç»„é‡æ–°ç»„åˆï¼Œæ¯”ä»–å°çš„æ”¾å·¦è¾¹ï¼Œå¤§çš„æ”¾å³è¾¹

3. é‡å¤ä¸Šé¢çš„æ“ä½œ

   ```cpp
   if(left>=right)return
   p <- partition(A,lo,hi)
   quicksort(A,lo,p-1)
   quicksort(A,p+1,hi)
   ```

```cpp
function partition(arr, low, high):
    randomPivotIndex = random number between low and high
    // å°†éšæœºé€‰æ‹©çš„ pivot ä¸ high ä½ç½®çš„å…ƒç´ äº¤æ¢
    swap arr[randomPivotIndex] and arr[high]
    // å°† arr[high] ä½œä¸ºåŸºå‡†å€¼
    pivot = arr[high]
    i = low - 1   // i ç”¨äºæ ‡è®°å°äºæˆ–ç­‰äº pivot çš„åŒºåŸŸæœ«å°¾ç´¢å¼•
    // éå†æ•°ç»„ä» low åˆ° high - 1
    for j = low to high - 1:
        if arr[j] <= pivot:
            i = i + 1
            swap arr[i] and arr[j]   // å°†å°äºæˆ–ç­‰äº pivot çš„å…ƒç´ æ”¾åˆ°å·¦è¾¹
    swap arr[i + 1] and arr[high]
    return i + 1
```





```cpp
QuickSort(arr, 0, 7)
â”‚
â”œâ”€ QuickSort(arr, 0, 6)
â”‚  â”‚
â”‚  â”œâ”€ QuickSort(arr, 0, 3)
â”‚  â”‚  â”‚
â”‚  â”‚  â”œâ”€ QuickSort(arr, 0, -1) // Returns
â”‚  â”‚  â””â”€ QuickSort(arr, 1, 3)
â”‚  â”‚     â”œâ”€ QuickSort(arr, 1, 1) // Returns
â”‚  â”‚     â””â”€ QuickSort(arr, 3, 3) // Returns
â”‚  â”‚
â”‚  â””â”€ QuickSort(arr, 5, 6)
â”‚     â”œâ”€ QuickSort(arr, 5, 5) // Returns
â”‚     â””â”€ QuickSort(arr, 7, 6) // Returns
â”‚
â””â”€ QuickSort(arr, 8, 7) // Returns

```



#### **Time complexity**

**æ—¶é—´å¤æ‚åº¦åˆ†æ**çš„è¿‡ç¨‹éœ€è¦è¯¦ç»†ä¸€äº›ï¼Œæ¯ä¸€éƒ¨åˆ†æ‰€éœ€è¦çš„å¤æ‚åº¦æ˜¯å¤šå°‘ã€‚å¦‚æœå‡ºç°äº†å¿«é€Ÿæ’åºçš„æ€è·¯ç±»ä¼¼çš„ï¼Œéœ€è¦è¯æ˜æœŸæœ›æ˜¯O(nlogn)ã€‚å†™å‡ºæ¯ä¸€éƒ¨åˆ†éœ€è¦çš„å¤æ‚åº¦åï¼Œå†åˆæˆï¼Œå–æœ€å¤§å¤æ‚åº¦å¾—åˆ°ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ã€‚

Because of random, we cannot calculate the exact complexity, but expectation in statistcs.

Consider the probability we need to  compare e~i~ and e~j~ . $P(e_{ij})=\frac{2}{j-i+1}$

then We sum this probability $E(x)=2\sum_{i=1}^{n-1}{\sum_{j=i+1}^{n}{\frac{1}{j-i+1}}}$

then we get $E(x)=O(nlogn) with (c=2)$ 



### **è®¡æ•°æ’åºï¼ˆCounting Sortï¼‰**

- **é€‚ç”¨èŒƒå›´**ï¼šé€‚ç”¨äº**å·²çŸ¥å–å€¼èŒƒå›´è¾ƒå°çš„æ•´æ•°**æ’åºã€‚

- åŸºæœ¬æ€æƒ³

  ï¼š

  1. **ç»Ÿè®¡é¢‘æ¬¡**ï¼šéå†å¾…æ’åºæ•°ç»„ï¼Œç»Ÿè®¡æ¯ä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•°ã€‚
  2. **ç´¯åŠ é¢‘æ¬¡**ï¼šå¯¹é¢‘æ¬¡æ•°ç»„è¿›è¡Œç´¯åŠ ï¼Œå¾—åˆ°å…ƒç´ åœ¨æ’åºåçš„ä½ç½®ç´¢å¼•ã€‚
  3. **ç”Ÿæˆæ’åºç»“æœ**ï¼šæ ¹æ®ç´¯åŠ é¢‘æ¬¡ï¼Œå°†å…ƒç´ æ”¾ç½®åˆ°æ­£ç¡®çš„ä½ç½®ä¸Šã€‚

- ç‰¹ç‚¹

  ï¼š

  - **çº¿æ€§æ—¶é—´å¤æ‚åº¦**ï¼šæ—¶é—´å¤æ‚åº¦ä¸º O(n+k)O(n + k)O(n+k)ï¼Œå…¶ä¸­ n æ˜¯å¾…æ’åºå…ƒç´ çš„æ•°é‡ï¼Œk æ˜¯å…ƒç´ çš„å–å€¼èŒƒå›´ã€‚
  - **ç¨³å®šæ€§**ï¼šè®¡æ•°æ’åºæ˜¯ç¨³å®šçš„æ’åºç®—æ³•ï¼Œèƒ½ä¿æŒç›¸åŒå…ƒç´ çš„ç›¸å¯¹ä½ç½®ã€‚

### **æ¡¶æ’åºï¼ˆBucket Sortï¼‰**

- **é€‚ç”¨èŒƒå›´**ï¼šé€‚ç”¨äº**å…ƒç´ å€¼åˆ†å¸ƒè¾ƒä¸ºå‡åŒ€çš„æ•°ç»„**ï¼Œä¸”å…ƒç´ å¯ä»¥æ˜ å°„åˆ°æ¡¶ä¸­ã€‚

- åŸºæœ¬æ€æƒ³

  ï¼š

  1. **åˆ†é…æ¡¶**ï¼šæ ¹æ®å…ƒç´ å€¼çš„åˆ†å¸ƒï¼Œå°†å…ƒç´ åˆ†é…åˆ°ä¸åŒçš„æ¡¶ä¸­ã€‚
  2. **æ¡¶å†…æ’åº**ï¼šå¯¹æ¯ä¸ªæ¡¶å†…çš„å…ƒç´ è¿›è¡Œæ’åºï¼Œå¯ä»¥ä½¿ç”¨ä»»ä½•ç¨³å®šçš„æ’åºç®—æ³•ã€‚
  3. **åˆå¹¶ç»“æœ**ï¼šä¾æ¬¡éå†æ¯ä¸ªæ¡¶ï¼Œåˆå¹¶æ¡¶å†…å…ƒç´ å¾—åˆ°æ’åºç»“æœã€‚

- ç‰¹ç‚¹

  ï¼š

  - **å¹³å‡çº¿æ€§æ—¶é—´å¤æ‚åº¦**ï¼šåœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(n)O(n)O(n)ã€‚
  - **å¯¹æ•°æ®åˆ†å¸ƒæ•æ„Ÿ**ï¼šå½“æ•°æ®åˆ†å¸ƒä¸å‡åŒ€æ—¶ï¼Œæ¡¶æ’åºçš„æ€§èƒ½ä¼šä¸‹é™ã€‚



## **Data Structure Linked list**

### Aæœ‰ä¸¤ä¸ªå€¼{pointer to the next location , now value}

### **é“¾è¡¨ä¸æ•°ç»„**

* é“¾è¡¨å¯ä»¥åŠ¨æ€åˆ†é…ç©ºé—´ï¼Œä½†æ¯ä¸€ä¸ªnodeç”¨çš„å‚¨å­˜ç©ºé—´æ›´å¤§

* é“¾è¡¨çš„åˆ é™¤å’Œæ’å…¥æ“ä½œå¤æ‚åº¦æ˜¯O(1),æ•°ç»„æ˜¯O(n)
* æ•°ç»„å¯ä»¥è¿›è¡ŒæŸ¥æ‰¾å’Œæ’åºï¼Œé“¾è¡¨ä¸å®¹æ˜“å®ç°ã€‚ä½†æ˜¯å¯ä»¥**åˆ›å»ºæŒ‡é’ˆæ•°ç»„å¯¹é“¾è¡¨æ’åº**
* é“¾è¡¨çš„è®¿é—®å¿…ç„¶æ˜¯O(n)

link list å¯ä»¥ç”¨äºé€‚å®œå­˜å‚¨æ€§è´¨çš„æ•°æ®ç»“æ„ï¼Œæ˜¯ä¸€ç§å®¹å™¨ã€‚

ä¹Ÿå¯ä»¥åšæˆä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œå³æ¯ä¸€ä¸ªnodeå‚¨å­˜ä»–çš„å‰ä¸€ä¸ªå’Œåä¸€ä¸ªçš„åœ°å€ã€‚

Traverse(A):

while(A.value!=null)

â€‹	print A.value

â€‹	A <- A.next

### Insert Node(A,node p,i)

1. a<- 0 , node P <- A
2. while(i-1>a)           â€”**count and traverse**
   1. p<- p.next
   2. a <- a+1

3. tmp <- p.next
4. p.next <- q
5. q.next <- tmp
6. return 

### Delete Node(node A,i)

1. a<- 0 , node P <- A
2. while( i - 1 > a)           â€”**count and traverse**
   1. p<- p.next
   2. a <- a+1

3. p.next <- p.next.next
4. return A

### Time complexity above is all 

time: O(n)   space: O(1)

## **Stack and queue O(1)**

### First In Last Out (FILO) 

### STD åº“ä¸­Stackçš„å®ç°ï¼š

å½“å‚¨å­˜Stackè¶…å‡ºæ•°ç»„çš„sizeæ—¶ï¼Œstdåº“ä¼šæ ¹æ®å†…å­˜æƒ…å†µdoubleæˆ–half doubleå‚¨å­˜ç©ºé—´ã€‚

### Application of Stacks

#### Brackets Balance Problem

Methodology 

ï‚³ Employ stack store checked left bracket ï‚³ Pop out left bracket if it is matched

####  Postfix expression

##### **Infix åˆ° Postfix çš„è½¬æ¢è§„åˆ™ï¼š**

1. **æ“ä½œæ•°ç›´æ¥è¾“å‡º**ï¼šå½“é‡åˆ°æ“ä½œæ•°æ—¶ï¼Œç›´æ¥å°†å…¶æ·»åŠ åˆ°è¾“å‡ºä¸­ã€‚
2. è¿ç®—ç¬¦æŒ‰ä¼˜å…ˆçº§å¤„ç†
   - å¦‚æœè¿ç®—ç¬¦æ ˆä¸ºç©ºæˆ–æ ˆé¡¶æ˜¯å·¦æ‹¬å· `(`ï¼Œåˆ™ç›´æ¥å°†å½“å‰è¿ç®—ç¬¦å‹å…¥æ ˆä¸­ã€‚
   - å¦‚æœå½“å‰è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§å¤§äºæ ˆé¡¶è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§ï¼Œåˆ™å°†å½“å‰è¿ç®—ç¬¦å‹å…¥æ ˆä¸­ã€‚
   - å¦‚æœå½“å‰è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§å°äºæˆ–ç­‰äºæ ˆé¡¶è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§ï¼Œåˆ™å¼¹å‡ºæ ˆé¡¶è¿ç®—ç¬¦å¹¶å°†å…¶æ·»åŠ åˆ°è¾“å‡ºä¸­ï¼Œç›´åˆ°é‡åˆ°ä¼˜å…ˆçº§æ›´ä½çš„è¿ç®—ç¬¦æˆ–æ ˆä¸ºç©ºï¼Œç„¶åå°†å½“å‰è¿ç®—ç¬¦å‹å…¥æ ˆä¸­ã€‚
3. **é‡åˆ°å·¦æ‹¬å·**ï¼šå°†å…¶ç›´æ¥å‹å…¥æ ˆä¸­ã€‚
4. **é‡åˆ°å³æ‹¬å·**ï¼šå¼¹å‡ºæ ˆé¡¶è¿ç®—ç¬¦ï¼Œç›´åˆ°é‡åˆ°å·¦æ‹¬å·ä¸ºæ­¢ï¼ˆå·¦æ‹¬å·ä¸è¾“å‡ºï¼‰ã€‚
5. **æ ˆä¸­å‰©ä½™çš„è¿ç®—ç¬¦**ï¼šå½“è¡¨è¾¾å¼æ‰«æå®Œæ¯•åï¼Œå°†æ ˆä¸­å‰©ä½™çš„è¿ç®—ç¬¦ä¾æ¬¡å¼¹å‡ºå¹¶æ·»åŠ åˆ°è¾“å‡ºä¸­ã€‚

#### Postfix Expression Evaluation

 ï‚³ 5 9 3 + 4 2 * * 7 + *

 ï‚² Methodology 

 ï‚³ Read the tokens in one at a time 

ï‚³ If it is an operand, push it on the stack If it is a binary operator: 

ï‚® pop top two elements from the stack,  

ï‚® apply the operator,  ï‚® and push the result back on the stack

Arithmetic expression   $ a+ b * c$

1. Prefix expression   $+a * b c$   å‰ç¼€è¡¨è¾¾å¼
2. Infix expression  $a + b * c$   ä¸­ç¼€è¡¨è¾¾å¼
3. postfix expression $a b c + *$  åç¼€è¡¨è¾¾å¼

#### å¦‚ä½•åšä¸€ä¸ªè®¡ç®—å™¨ï¼Ÿç”¨æ ˆå®ç°

1. **infix expression -> postfix**
2. **Postfix Expression Evaluation**

### **Queue**

#### Queue Operations 

ï‚³ enQueue: add an item at the rear of the queue ï‚³ deQueue: remove the item at the front of the queue 

ï‚³ front: get the item at the front of the queue, but do  not remove it 

ï‚³ isEmpty: test if the queue is empty  ï‚³ isFull: test the queue is full 

ï‚³ clear: clear the queue, set it as empty queue ï‚³ size: return the current size of the queue

#### Array based Queue 

ï‚³ MAX_SIZE = n // the max size of stack

 ï‚³ front = 0 // the current front ï‚³ rear = 0 // the current rear 

ï‚³ Array S with n elements

### å•è°ƒæ ˆ

**å•è°ƒæ ˆ**æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ ˆæ•°æ®ç»“æ„ï¼Œå…¶å…ƒç´ æŒ‰ä¸€å®šçš„é¡ºåºï¼ˆå•è°ƒé€’å¢æˆ–å•è°ƒé€’å‡ï¼‰æ’åˆ—ï¼Œç”¨äºè§£å†³ä¸€ç±»å…·æœ‰â€œä¸‹ä¸€ä¸ªæ›´å¤§/å°å…ƒç´ â€æˆ–â€œå­æ•°ç»„æœ€å¤§/å°å€¼â€çš„é—®é¢˜ã€‚å•è°ƒæ ˆçš„å®ç°å’Œä½¿ç”¨ç®€å•ä½†åŠŸèƒ½å¼ºå¤§ï¼Œç‰¹åˆ«é€‚ç”¨äºå…·æœ‰é¡ºåºå…³ç³»çš„é—®é¢˜ä¸­ã€‚

##### ä½œç”¨
å•è°ƒæ ˆçš„ä¸»è¦ä½œç”¨æ˜¯å¿«é€Ÿæ‰¾åˆ°å…ƒç´ çš„â€œä¸‹ä¸€ä¸ªæ›´å¤§/å°å…ƒç´ â€æˆ–â€œå‰ä¸€ä¸ªæ›´å¤§/å°å…ƒç´ â€ã€‚è¿™ç§éœ€æ±‚åœ¨å¤„ç†æ»‘åŠ¨çª—å£ã€æŸ±çŠ¶å›¾æœ€å¤§çŸ©å½¢é¢ç§¯ã€è‚¡ç¥¨ä»·æ ¼æ³¢åŠ¨ç­‰é—®é¢˜æ—¶éå¸¸å¸¸è§ã€‚é€šè¿‡å•è°ƒæ ˆï¼Œå¯ä»¥æœ‰æ•ˆåœ°é™ä½æ—¶é—´å¤æ‚åº¦ï¼Œé€šå¸¸å¯å°†æš´åŠ›æ±‚è§£çš„ \(O(n^2)\) æ—¶é—´å¤æ‚åº¦é™åˆ° \(O(n)\)ã€‚å•è°ƒæ ˆå¸¸è§äºï¼**å¯¹äºæ¯ä¸€ä¸ªå…ƒç´ ï¼Œä»–åªåœ¨ä¹ä¹‹å‰ï¼ˆåï¼‰å…ƒç´ çš„æœ€å¤§å€¼æˆ–æœ€å°å€¼**çš„æƒ…å†µ

##### å®ç°æ€æƒ³
å•è°ƒæ ˆçš„åŸºæœ¬å®ç°æ˜¯ä¾é æ ˆç»“æ„çš„â€œåè¿›å…ˆå‡ºâ€ç‰¹æ€§æ¥ä¿æŒå…ƒç´ çš„å•è°ƒæ€§ã€‚å½“åŠ å…¥ä¸€ä¸ªæ–°çš„å…ƒç´ æ—¶ï¼Œå°†æ ˆä¸­ä¸æ»¡è¶³å•è°ƒæ€§çš„å…ƒç´ å¼¹å‡ºï¼Œä»¥ç»´æŒæ ˆå†…çš„å•è°ƒé¡ºåºã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ ˆå†…å§‹ç»ˆä¿ç•™å½“å‰å…ƒç´ ä¹‹å‰çš„â€œåˆé€‚çš„â€å€¼ï¼Œèƒ½å¤Ÿå®ç°å¸¸æ•°æ—¶é—´å¤æ‚åº¦çš„æŸ¥æ‰¾æ“ä½œã€‚

å•è°ƒæ ˆæœ‰ä¸¤ç§ä¸»è¦ç±»å‹ï¼š
- **å•è°ƒé€’å¢æ ˆ**ï¼šä»æ ˆåº•åˆ°æ ˆé¡¶å…ƒç´ é€æ¸å¢å¤§ã€‚
- **å•è°ƒé€’å‡æ ˆ**ï¼šä»æ ˆåº•åˆ°æ ˆé¡¶å…ƒç´ é€æ¸å‡å°ã€‚

##### ä»£ç å®ç°

ä»¥ä¸‹æ˜¯ä¸€ä¸ªå•è°ƒé€’å¢æ ˆçš„å®ç°ç¤ºä¾‹ï¼Œè§£å†³â€œä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ â€é—®é¢˜ã€‚å¯¹äºæ¯ä¸ªå…ƒç´ ï¼Œæ‰¾åˆ°å…¶å³è¾¹ç¬¬ä¸€ä¸ªæ¯”å®ƒå¤§çš„å…ƒç´ ï¼Œè‹¥æ²¡æœ‰åˆ™è¿”å› -1ã€‚



### ä»£ç è§£æ
- `stack<int> s;` ä½¿ç”¨æ ˆæ¥å­˜å‚¨å…ƒç´ çš„ç´¢å¼•ï¼Œè€Œä¸æ˜¯å€¼ï¼Œä¾¿äºåœ¨ `result` æ•°ç»„ä¸­ç›´æ¥æ›´æ–°å¯¹åº”ä½ç½®ã€‚
- `while` å¾ªç¯ï¼šæ ˆé¡¶å…ƒç´ è‹¥å°äºå½“å‰å…ƒç´ ï¼Œè¡¨ç¤ºæ‰¾åˆ°äº†æ ˆé¡¶å…ƒç´ çš„ä¸‹ä¸€ä¸ªæ›´å¤§å€¼ã€‚
- `s.push(i);` å°†å½“å‰å…ƒç´ çš„ç´¢å¼•å…¥æ ˆï¼Œä¾¿äºåç»­åˆ¤æ–­å…¶ä¸‹ä¸€ä¸ªæ›´å¤§å€¼ã€‚

### æ—¶é—´å¤æ‚åº¦
ç”±äºæ¯ä¸ªå…ƒç´ æœ€å¤šå…¥æ ˆå’Œå‡ºæ ˆå„ä¸€æ¬¡ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º \(O(n)\)ï¼Œé€‚åˆå¤§è§„æ¨¡æ•°æ®çš„é«˜æ•ˆå¤„ç†ã€‚

## String

### Brute Force 

ï‚³ Check for pattern starting at every text position 

```cpp
BruteForce(T, P): 
 n â† len(T), m â† len(P) 
 for i â† 0 to n-m-1 
     for j â† 0 to m-1 
         if P[j] != T[i+j] then  
             break; 
	if j = m-1 
        pattern occurs with shift i 
```

ï‚² Time complexity

Worst case: m*n comparisions 

ï‚³ Too slow when m and n are large

### Rabin-Karp Algorithm

**1. å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—**

##### å­—æ¯è¡¨å’ŒåŸºæ•°

å‡è®¾å­—ç¬¦ä¸²çš„å­—ç¬¦æ¥è‡ªä¸€ä¸ªå­—æ¯è¡¨ $\Sigma$ï¼Œä¾‹å¦‚å­—æ¯è¡¨å¯ä»¥æ˜¯ `{a, â€¦, z, A, â€¦, Z}`ï¼Œä¹Ÿå°±æ˜¯åŒ…å«å¤§å°å†™è‹±æ–‡å­—æ¯ï¼Œæ€»å…± $d=âˆ£Î£âˆ£=52 ä¸ªå­—ç¬¦$ã€‚

ä¸ºäº†å°†ä¸€ä¸ªå­—ç¬¦ä¸²è½¬æ¢æˆä¸€ä¸ªæ•°å­—ï¼Œå¯ä»¥ä½¿ç”¨ **åŸºæ•°** dï¼ˆå³å­—æ¯è¡¨çš„å¤§å°ï¼‰å’Œä¸€ä¸ªå“ˆå¸Œè§„åˆ™ **Hornerâ€™s Rule**ï¼ˆéœçº³è§„åˆ™ï¼‰ï¼ŒæŒ‰ä»¥ä¸‹æ–¹å¼å¯¹å­—ç¬¦ä¸²çš„æ¯ä¸€ä½å­—ç¬¦è¿›è¡ŒåŠ æƒè®¡ç®—ï¼Œä½¿å¾—ä¸åŒçš„å­—ç¬¦åºåˆ—äº§ç”Ÿä¸åŒçš„æ•´æ•°å€¼ã€‚

**Horner's Rule**

å¯¹äºä¸€ä¸ªåŒ…å« mä¸ªå­—ç¬¦çš„å­ä¸²$ P[0],P[1],â€¦,P[mâˆ’1]$ï¼Œå¯ä»¥å°†å…¶è½¬æ¢æˆä¸€ä¸ªæ•´æ•°å“ˆå¸Œå€¼ pï¼š

**$p=P[mâˆ’1]+dâ‹…(P[mâˆ’2]+dâ‹…(P[mâˆ’3]+â€¦+dâ‹…(P[1]+dâ‹…P[0])â€¦))$**

å…¶ä¸­ P[i] æ˜¯å­ä¸²ä¸­çš„ç¬¬ iä¸ªå­—ç¬¦ï¼Œå¯¹åº”çš„æ•´æ•°ç¼–ç ã€‚è¿™æ ·æˆ‘ä»¬å¾—åˆ°çš„ p å°±æ˜¯å­ä¸²çš„å“ˆå¸Œå€¼ã€‚

**2. æ¨¡è¿ç®—ä»¥é˜²å“ˆå¸Œæº¢å‡º**

å½“ m å¾ˆå¤§æ—¶ï¼Œç›´æ¥è®¡ç®— p å¯èƒ½å¯¼è‡´æ•´æ•°æº¢å‡ºï¼ˆå³æ•°å­—è¿‡å¤§ï¼‰ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé€šå¸¸å°†ç»“æœå¯¹ä¸€ä¸ªè´¨æ•° qå–æ¨¡ï¼Œä»¥ä¿è¯è®¡ç®—ç»“æœä¸è¶…å‡ºæ•´æ•°èŒƒå›´ï¼š

$p=(P[mâˆ’1]+dâ‹…(P[mâˆ’2]+dâ‹…(P[mâˆ’3]+â€¦+dâ‹…(P[1]+dâ‹…P[0])â€¦)))modâ€‰â€‰q$

**3. æ»šåŠ¨å“ˆå¸Œ**

æ»šåŠ¨å“ˆå¸Œï¼ˆRolling Hashï¼‰æ˜¯ä¸€ç§æŠ€æœ¯ï¼Œå¯ä»¥åœ¨ O(1)æ—¶é—´å†…è®¡ç®—ä¸‹ä¸€ä¸ªå­ä¸²çš„å“ˆå¸Œå€¼ã€‚

- **åˆå§‹å“ˆå¸Œå€¼**ï¼šå…ˆè®¡ç®—ç¬¬ä¸€ä¸ªå­ä¸²ï¼ˆé•¿åº¦ä¸º mï¼‰çš„å“ˆå¸Œå€¼ t[0]ã€‚
- **é€’æ¨è®¡ç®—**ï¼šå‡è®¾æˆ‘ä»¬å·²ç»çŸ¥é“ t[i]ï¼Œå¯ä»¥åœ¨ O(1) æ—¶é—´å†…é€šè¿‡ä»¥ä¸‹å…¬å¼è®¡ç®— t[i+1]ï¼š

$t[i+1]=(dâ‹…(t[i]âˆ’hâ‹…T[i])+T[i+m])modâ€‰â€‰q$

å…¶ä¸­ï¼š

- T[i]  æ˜¯æ–‡æœ¬ä¸­çš„ç¬¬ iä¸ªå­—ç¬¦ã€‚
- T[i+m] æ˜¯æ–°åŠ å…¥çª—å£çš„å­—ç¬¦ã€‚
- $h \equiv d^{m-1} \mod q $æ˜¯ä¸€ä¸ªå¸¸æ•°ï¼Œç”¨äºæŠµæ¶ˆçª—å£æœ€å·¦è¾¹å­—ç¬¦çš„è´¡çŒ®ã€‚

è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡å‰ä¸€ä¸ªå“ˆå¸Œå€¼ $ t[i] $å¿«é€Ÿè®¡ç®—å‡ºä¸‹ä¸€ä¸ªçª—å£çš„å“ˆå¸Œå€¼ $t[i+1]$ ï¼Œä»è€Œåœ¨ O(nâˆ’m) æ—¶é—´å†…å®Œæˆæ•´ä¸ªå­—ç¬¦ä¸²çš„å“ˆå¸ŒåŒ¹é…ã€‚

### Rabin-Karpç®—æ³•ç®€ä»‹

Rabin-Karpæ˜¯ä¸€ç§å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•ï¼Œç”¨äºåœ¨æ–‡æœ¬`T`ä¸­æŸ¥æ‰¾æ¨¡å¼`P`çš„ä½ç½®ã€‚å®ƒé€šè¿‡å“ˆå¸Œå€¼å¿«é€Ÿæ¯”è¾ƒï¼Œæå‡åŒ¹é…æ•ˆç‡ã€‚

![image-20241111173450589](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20241111173450589.png)



### **Fast  State Automata**

![image-20241105112321522](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20241105112321522.png)

![image-20241105154413770](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20241105154413770.png)



#### **ç®—æ³•åˆ†æ**

1. **è¾“å…¥**ï¼š
   - `P`ï¼šæ¨¡å¼ä¸²ï¼Œé•¿åº¦ä¸º `m`ã€‚
   - `Î£`ï¼šå­—ç¬¦é›†ï¼Œè¡¨ç¤ºæ‰€æœ‰å¯èƒ½çš„å­—ç¬¦ã€‚
2. **è¾“å‡º**ï¼š
   - `ğ›¿`ï¼šè½¬ç§»å‡½æ•°ï¼Œè¡¨ç¤ºä»æ¯ä¸ªçŠ¶æ€åœ¨è¯»å–æŸä¸ªå­—ç¬¦åï¼Œè½¬ç§»åˆ°å“ªä¸ªçŠ¶æ€ã€‚

**æ­¥éª¤ 1ï¼šåˆå§‹åŒ–**

```
1. m â† len(P)
2. X â† 0
3. Initialize ğ›¿(0,a) for each a âˆˆ Î£
```

- `m â† len(P)`ï¼šè®¡ç®—æ¨¡å¼ä¸² `P` çš„é•¿åº¦ã€‚
- `X â† 0`ï¼šè¿™æ˜¯ä¸€ä¸ªè¾…åŠ©å˜é‡ï¼Œåˆå§‹åŒ–ä¸º `0`ï¼Œç”¨äºå­˜å‚¨å½“å‰çŠ¶æ€çš„è½¬ç§»ä¿¡æ¯ã€‚
- `Initialize ğ›¿(0,a) for each a âˆˆ Î£`ï¼šå¯¹äºåˆå§‹çŠ¶æ€ï¼ˆ`0`ï¼‰ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºå­—ç¬¦é›† `Î£` ä¸­çš„æ¯ä¸ªå­—ç¬¦åˆå§‹åŒ–è½¬ç§»ã€‚è¿™é‡Œçš„ `ğ›¿(0,a)` è¡¨ç¤ºä»çŠ¶æ€ `0` åœ¨è¯»å–å­—ç¬¦ `a` æ—¶åº”è¯¥è½¬ç§»åˆ°å“ªä¸ªçŠ¶æ€ã€‚åˆå§‹æ—¶ï¼Œå¯èƒ½éƒ½æ²¡æœ‰åŒ¹é…ï¼Œæ‰€ä»¥ä¸‹é¢çš„è½¬ç§»ä¼šæ ¹æ®åŒ¹é…æƒ…å†µå¡«å……ã€‚

**æ­¥éª¤ 2ï¼šå¡«å……è½¬ç§»è¡¨**

```
for j â† 1 to m-1
 for each character a âˆˆ Î£
 if P[j+1] = a then // char match
 ğ›¿(j,a) â† j + 1
else // char mismatch
 ğ›¿(j,a) â† ğ›¿(X,a)
```

- `for j â† 1 to m-1`ï¼šéå†æ¨¡å¼ä¸² `P` çš„æ¯ä¸ªä½ç½®ï¼Œ`j` ä» `1` åˆ° `m-1`ï¼Œå³æˆ‘ä»¬è·³è¿‡ `P[0]`ï¼ˆå‡è®¾çŠ¶æ€ `0` ä»£è¡¨ç©ºå­—ç¬¦åŒ¹é…ï¼‰ã€‚

- `for each character a âˆˆ Î£ï¼š`
  - **å¦‚æœå­—ç¬¦åŒ¹é…** (`P[j+1] = a`)ï¼šå³æ¨¡å¼ä¸² `P` çš„å½“å‰ä½ç½®å­—ç¬¦ä¸å½“å‰å­—ç¬¦ `a` åŒ¹é…ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¼šå°†è½¬ç§»è¡¨ `ğ›¿(j,a)` è®¾ç½®ä¸º `j + 1`ï¼Œæ„å‘³ç€å¦‚æœæˆ‘ä»¬åœ¨çŠ¶æ€ `j` æ—¶æ¥æ”¶åˆ°å­—ç¬¦ `a`ï¼Œæˆ‘ä»¬ä¼šè½¬ç§»åˆ°çŠ¶æ€ `j + 1`ã€‚
  - **å¦‚æœå­—ç¬¦ä¸åŒ¹é…**ï¼šå³ `P[j+1] != a`ï¼Œåˆ™æˆ‘ä»¬æ ¹æ®ä¸Šä¸€æ¬¡çš„åŒ¹é…çŠ¶æ€ `X` æ¥è®¾ç½®è½¬ç§»ï¼Œå³ `ğ›¿(j,a) = ğ›¿(X, a)`ã€‚è¿™ä¸ªå›é€€æ“ä½œåˆ©ç”¨äº†ä¸Šä¸€æ­¥è®¡ç®—çš„è½¬ç§»å‡½æ•°ï¼Œä»è€Œé¿å…é‡æ–°åŒ¹é…å·²ç»åŒ¹é…è¿‡çš„éƒ¨åˆ†ã€‚

**æ­¥éª¤ 3ï¼šæ›´æ–°è¾…åŠ©å˜é‡ `X`**

```
 X â† ğ›¿(X,P[j]) 
```

- è¿™é‡Œï¼Œ`X â† ğ›¿(X, P[j+1])` è¡¨ç¤ºæ›´æ–° `X` ä¸ºå½“å‰çŠ¶æ€ `X` åœ¨æ¥æ”¶åˆ°æ¨¡å¼ä¸² `P[j]` æ—¶çš„è½¬ç§»çŠ¶æ€ã€‚è¿™æ˜¯ä¸ºäº†åœ¨ä¸‹ä¸€æ¬¡å¤„ç†å­—ç¬¦æ—¶ï¼Œèƒ½å¤Ÿç»§ç»­å‚è€ƒä¹‹å‰å·²ç»åŒ¹é…çš„éƒ¨åˆ†ã€‚**(è¿™é‡Œä¸€å®šæ³¨æ„Xæ˜¯å»¶åæ›´æ–°çš„ï¼Œå·®è¡Œå¤åˆ¶)**

**æ­¥éª¤ 4ï¼šè¿”å›è½¬ç§»å‡½æ•°**

` return ğ›¿`

- æœ€åè¿”å›å¡«å……å®Œæˆçš„è½¬ç§»å‡½æ•° `ğ›¿`ã€‚

### **è½¬ç§»å‡½æ•°çš„å·¥ä½œåŸç†**

æ„é€ å‡ºæ¥çš„ `ğ›¿` å‡½æ•°æè¿°äº†ä»æ¯ä¸ªçŠ¶æ€å‡ºå‘ï¼Œåœ¨æ¥æ”¶åˆ°æŸä¸ªå­—ç¬¦æ—¶åº”è¯¥è½¬ç§»åˆ°å“ªä¸ªçŠ¶æ€ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šé€šè¿‡åŠ¨æ€æ›´æ–°æ¨¡å¼ä¸²åŒ¹é…çŠ¶æ€ï¼Œé¿å…é‡å¤åŒ¹é…å·²ç»å¤„ç†è¿‡çš„éƒ¨åˆ†ï¼Œä»è€ŒåŠ é€ŸåŒ¹é…è¿‡ç¨‹ã€‚



### **KMP ç®—æ³•ï¼šå­—ç¬¦ä¸²åŒ¹é…**

KMP (Knuth-Morris-Pratt) ç®—æ³•é€šè¿‡ä½¿ç”¨ **éƒ¨åˆ†åŒ¹é…è¡¨ï¼ˆ`Ï€` æ•°ç»„ï¼‰** æ¥é«˜æ•ˆåœ°æŸ¥æ‰¾æ–‡æœ¬ `T` ä¸­æ˜¯å¦åŒ…å«æ¨¡å¼ä¸² `P`ï¼Œå¹¶ä¸”é¿å…äº†æš´åŠ›åŒ¹é…ä¸­é‡å¤æ¯”è¾ƒçš„è®¡ç®—ï¼Œä»è€Œå°†æ—¶é—´å¤æ‚åº¦ä» `O(n * m)` é™ä½åˆ° `O(n + m)`ã€‚

**è‡ªå·±çš„ç†è§£ï¼š** ä¹‹æ‰€ä»¥çœ‹å‰åç¼€ï¼Œå¯¹äºç¬¬iä¸ªä¸»ä¸²æ˜¯å› ä¸ºå­ä¸²çš„å‰åŠéƒ¨åˆ†ä¸ä¸»ä¸²çš„ååŠéƒ¨åˆ†å·²ç»åŒ¹é…è¿‡ç­‰ä»·äºä¸»ä¸²çš„å‰åç¼€åŒ¹é…ã€‚ 

#### **KMP ç®—æ³•çš„æ ¸å¿ƒæ­¥éª¤**ï¼š

1. **åˆå§‹åŒ–**ï¼š

   - `n â† len(T)`ï¼šè·å–æ–‡æœ¬ä¸² `T` çš„é•¿åº¦ã€‚
   - `m â† len(P)`ï¼šè·å–æ¨¡å¼ä¸² `P` çš„é•¿åº¦ã€‚
   - `Ï€ â† NextArray(P)`ï¼šè°ƒç”¨ `NextArray` å‡½æ•°ï¼Œæ„å»ºæ¨¡å¼ä¸² `P` çš„ **éƒ¨åˆ†åŒ¹é…è¡¨**ï¼ˆæˆ– `Ï€` æ•°ç»„ï¼‰ã€‚
   - `q â† 0`ï¼šåˆå§‹åŒ–æ¨¡å¼ä¸²å½“å‰åŒ¹é…çš„ä½ç½® `q` ä¸º `0`ï¼Œè¡¨ç¤ºæ¨¡å¼ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦è¿˜æ²¡æœ‰åŒ¹é…ã€‚

2. **éå†æ–‡æœ¬ä¸²**ï¼š

   - éå†æ–‡æœ¬ä¸² `T` ä¸­çš„æ¯ä¸ªå­—ç¬¦ï¼ˆ`i` ä» `1` åˆ° `n`ï¼‰ï¼Œå°è¯•ä¸æ¨¡å¼ä¸² `P` è¿›è¡ŒåŒ¹é…ã€‚

3. **åŒ¹é…è¿‡ç¨‹ä¸­**ï¼š

   - `while q > 0 and P[q+1] != T[i]`

     ï¼š

     - å½“å½“å‰åŒ¹é…çš„å­—ç¬¦ä¸ç›¸ç­‰æ—¶ï¼Œé€šè¿‡ `Ï€` æ•°ç»„å›é€€æ¨¡å¼ä¸²çš„ä½ç½® `q`ï¼Œå¯»æ‰¾ä¸Šä¸€ä¸ªå¯èƒ½çš„åŒ¹é…ç‚¹ã€‚`Ï€[q]` è¡¨ç¤ºå½“å‰åŒ¹é…å¤±è´¥æ—¶æ¨¡å¼ä¸²çš„ä¸‹ä¸€æ¬¡åŒ¹é…ä½ç½®ã€‚

   - **`q â† Ï€[q]`**ï¼šå›é€€åˆ° `Ï€[q]`ï¼Œå³åˆ©ç”¨éƒ¨åˆ†åŒ¹é…è¡¨è·³è¿‡å·²ç»åŒ¹é…çš„éƒ¨åˆ†ã€‚

4. **å­—ç¬¦åŒ¹é…**ï¼š

   - `if P[q+1] = T[i]`

     ï¼š

     - å¦‚æœå½“å‰æ–‡æœ¬å­—ç¬¦ `T[i]` ä¸æ¨¡å¼ä¸²çš„å­—ç¬¦ `P[q+1]` åŒ¹é…ï¼Œæ›´æ–° `q`ï¼Œè¡¨ç¤ºæ¨¡å¼ä¸²æˆåŠŸåŒ¹é…äº†ä¸€ä¸ªå­—ç¬¦ã€‚

   - **`q â† q + 1`**ï¼šå¢åŠ  `q`ï¼Œè¡¨ç¤ºæ¨¡å¼ä¸²å‘åæ¨è¿›ä¸€ä¸ªå­—ç¬¦ï¼Œå‡†å¤‡åŒ¹é…ä¸‹ä¸€ä¸ªå­—ç¬¦ã€‚

5. **æ¨¡å¼ä¸²åŒ¹é…æˆåŠŸ**ï¼š

   - `if q == m`

     ï¼š

     - å½“ `q == m` æ—¶ï¼Œè¡¨ç¤ºæ¨¡å¼ä¸² `P` å·²ç»å®Œå…¨åŒ¹é…æˆåŠŸï¼Œæ‰“å°åŒ¹é…çš„ä½ç½®ã€‚
     - æ‰“å°ç»“æœï¼š`print "Pattern occurs with shift" i - m`ï¼Œå³æ¨¡å¼ä¸²çš„èµ·å§‹ä½ç½®ä¸º `i - m`ï¼Œè¡¨ç¤ºæ¨¡å¼ä¸² `P` åœ¨æ–‡æœ¬ `T` ä¸­çš„åŒ¹é…ä½ç½®ã€‚

6. **å›é€€ç»§ç»­æœç´¢**ï¼š

   - **`q â† Ï€[q]`**ï¼šç»§ç»­æ ¹æ®éƒ¨åˆ†åŒ¹é…è¡¨å›é€€ï¼Œå¯»æ‰¾å¯èƒ½çš„ä¸‹ä¸€ä¸ªåŒ¹é…ä½ç½®ã€‚

#### **éƒ¨åˆ†åŒ¹é…è¡¨æ„å»º**

`next` æ•°ç»„æ˜¯ KMP ç®—æ³•ä¸­ç”¨æ¥åŠ é€Ÿå­—ç¬¦ä¸²åŒ¹é…çš„æ ¸å¿ƒéƒ¨åˆ†ã€‚å®ƒè®°å½•äº†æ¨¡å¼ä¸²ï¼ˆ`P`ï¼‰ä¸­æ¯ä¸ªä½ç½®ä¹‹å‰çš„æœ€é•¿ç›¸ç­‰çš„å‰ç¼€å’Œåç¼€çš„é•¿åº¦ã€‚é€šè¿‡è¯¥æ•°ç»„ï¼Œåœ¨åŒ¹é…è¿‡ç¨‹ä¸­é‡åˆ°ä¸åŒ¹é…æ—¶ï¼Œå¯ä»¥è·³è¿‡å·²åŒ¹é…éƒ¨åˆ†ï¼Œé¿å…é‡å¤åŒ¹é…ï¼Œæé«˜æ•ˆç‡ã€‚

**åˆå§‹åŒ–**ï¼š

- `m â† len(P)`ï¼šè·å–æ¨¡å¼ä¸² `P` çš„é•¿åº¦ã€‚
- åˆ›å»ºä¸€ä¸ªæ•°ç»„ `Ï€`ï¼Œé•¿åº¦ä¸º `m`ï¼Œç”¨äºè®°å½•æ¨¡å¼ä¸²æ¯ä¸ªä½ç½®çš„éƒ¨åˆ†åŒ¹é…å€¼ï¼ˆå³å‰ç¼€å’Œåç¼€çš„æœ€å¤§åŒ¹é…é•¿åº¦ï¼‰ã€‚
- åˆå§‹æ¡ä»¶ï¼š`Ï€[0] = 0`ï¼Œè¡¨ç¤ºç¬¬ä¸€ä¸ªå­—ç¬¦æ²¡æœ‰å‰åç¼€åŒ¹é…ã€‚
- å˜é‡ `k â† 0`ï¼šè¡¨ç¤ºå½“å‰åŒ¹é…çš„å‰ç¼€é•¿åº¦ã€‚

1. **éå†æ¨¡å¼ä¸²**ï¼š ä» `q = 2` å¼€å§‹ï¼Œéå†æ¨¡å¼ä¸²çš„æ¯ä¸€ä¸ªå­—ç¬¦ `P[q]`ã€‚æ³¨æ„è¿™é‡Œçš„ `q` æ˜¯ä» 2 å¼€å§‹çš„ï¼Œå› ä¸º `Ï€[1]` å·²ç»åˆå§‹åŒ–ä¸º 0ã€‚
2. **å›é€€æœºåˆ¶**ï¼ˆé€šè¿‡ `while`ï¼‰ï¼š
   - å½“ `P[k+1]` å’Œ `P[q]` ä¸åŒ¹é…æ—¶ï¼Œ`k` éœ€è¦æ ¹æ® `Ï€[k]` å›é€€ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªåŒ¹é…æˆ–è€…å›é€€åˆ° `k = 0` ä¸ºæ­¢ã€‚
   - **å›é€€çš„åŸå› **ï¼šæ¨¡å¼ä¸²çš„å‰ç¼€å·²ç»éƒ¨åˆ†åŒ¹é…ï¼Œæ‰€ä»¥å¯ä»¥è·³è¿‡å·²ç»åŒ¹é…çš„éƒ¨åˆ†ï¼Œé¿å…é‡å¤è®¡ç®—ã€‚
3. **åŒ¹é…åˆ¤æ–­**ï¼š
   - å¦‚æœ `P[k+1] == P[q]`ï¼Œè¯´æ˜å½“å‰å­—ç¬¦åŒ¹é…æˆåŠŸï¼Œ`k` å¢åŠ  `1`ï¼Œå¹¶å°† `Ï€[q] = k`ã€‚
   - å¦‚æœä¸åŒ¹é…ï¼Œé€šè¿‡ `Ï€[k]` ç»§ç»­å›é€€ï¼Œç›´åˆ°æ‰¾åˆ°åŒ¹é…æˆ–è€…å›é€€åˆ° `k = 0`ã€‚
4. **ç»“æŸ**ï¼š
   - å½“éå†å®Œæˆæ—¶ï¼Œ`Ï€` æ•°ç»„å³ä¸ºå®Œæ•´çš„éƒ¨åˆ†åŒ¹é…è¡¨ã€‚

```
 m â† len(P)               // æ¨¡å¼ä¸²é•¿åº¦
 Let Ï€[1,â€¦,m] be a new array  // åˆ›å»ºæ•°ç»„ Ï€
 Ï€[1] = 0, k â† 0            // åˆå§‹åŒ–ç¬¬ä¸€ä¸ªä½ç½®ä¸º 0ï¼Œk ä¸º 0
 for q = 2 to m              // ä»ç¬¬äºŒä¸ªå­—ç¬¦å¼€å§‹éå†æ¨¡å¼ä¸²
     while k > 0 and P[k+1] != P[q]  // å¦‚æœä¸åŒ¹é…ï¼Œå›é€€
         k â† Ï€[k]            // å›é€€åˆ° Ï€[k]
     if P[k+1] = P[q]        // å¦‚æœåŒ¹é…
         k â† k + 1           // å¢åŠ åŒ¹é…é•¿åº¦
     Ï€[q] â† k                // è®°å½• Ï€[q]
 return Ï€                   // è¿”å›æ„å»ºå¥½çš„ Ï€ æ•°ç»„
```



- **éƒ¨åˆ†åŒ¹é…è¡¨**ï¼š`Ï€[q]` è¡¨ç¤ºæ¨¡å¼ä¸² `P[1...q]` ä¸­ï¼Œå‰ç¼€å’Œåç¼€çš„æœ€é•¿åŒ¹é…é•¿åº¦ã€‚
- **å›é€€æœºåˆ¶**ï¼šé€šè¿‡ `Ï€[k]` å›é€€ï¼Œé¿å…é‡å¤æ¯”è¾ƒå·²ç»åŒ¹é…çš„éƒ¨åˆ†ï¼Œæé«˜æ•ˆç‡ã€‚
- **æ—¶é—´å¤æ‚åº¦**ï¼šæ„å»º `Ï€` æ•°ç»„çš„æ—¶é—´å¤æ‚åº¦æ˜¯ **O(m)**ï¼Œå…¶ä¸­ `m` æ˜¯æ¨¡å¼ä¸²çš„é•¿åº¦



## Tree

**Tree Property I:** A tree with n nodes has n-1 edge.

Def: node `u` is a parent of node `v` if `v` is the node directly below u.

We say node `v` is a child of `u`

**Sibling**: åŒä¸€ä¸ªçˆ¶èŠ‚ç‚¹çš„å­èŠ‚ç‚¹

ä¸€ä¸ªèŠ‚ç‚¹åªèƒ½æœ‰ä¸€ä¸ªçˆ¶ï¼Œå¯ä»¥æœ‰å¤šä¸ªå­èŠ‚ç‚¹ã€‚

Consider a tree `T` . Let `u` and `v` be two nodes in T. let u and v be two nodes in `T` , we sat that u is an **ancestor** of v if one of the following holds:

1. **u=v** (not a proper ancestor)
2. u is a parent of v
3. u is a parent of an ancestor of v.

![image-20241119110231511](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20241119110231511.png)

ä¸­é—´èŠ‚ç‚¹ï¼šæ‹¥æœ‰è‡³å°‘ä¸€ä¸ªå­èŠ‚ç‚¹çš„èŠ‚ç‚¹

**è®¡ç®—å†…éƒ¨èŠ‚ç‚¹æ•°**ï¼š

$\text{å†…éƒ¨èŠ‚ç‚¹æ•°} = \left\lceil \frac{N-1}{K} \right\rceil = \frac{N-1 + K - 1}{K}$

ä½¿ç”¨æ•´æ•°è¿ç®—å®ç°å‘ä¸Šå–æ•´ã€‚

**è®¡ç®—å¶å­èŠ‚ç‚¹æ•°**ï¼š

$\text{å¶å­èŠ‚ç‚¹æ•°} = N - \text{å†…éƒ¨èŠ‚ç‚¹æ•°}$

**Tree Property II**

â€‹    Let T be a tree where every internal node has  at least 2 child nodes. If m is the number of  leaf nodes, then the number of internal nodes  is at most m-1.

### Tree Definition

![image-20241119114031214](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20241119114031214.png)

![image-20241119114129335](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20241119114129335.png)

#### K-ary tree

A K-ary tree is a roted where every internal node has at most k child nodes(as tied as possible)

#### Binary Tree

ï‚² Binary tree **recursive definition**:

 ï‚² A binary tree is either: 

1) empty or 
2)  a node (the root of the tree) that has 
   1)  one or more pieces of data (the key, and possibly  others) 
   2)  a **left subtree**, which is itself a binary tree 
   3)  a **right subtree**, which is itself a binary tree 

ï‚² A binary tree implies an ordering among the  nodes at the same level.

**Binary Tree: Full Level**

Consider a binary tree with height â„, its level  ğ‘™ (0 â‰¤ ğ‘™ â‰¤ â„) is full if it contains 2 ğ‘™ nodes.

Binary Tree: Complete Binary Tree 

ï‚² A binary tree of height â„ is complete if: 

â€‹	ï‚³ Level 0, 1, â€¦, h-1 are all full 

â€‹	ï‚³ At level h, the leaf nodes are â€œ**as far left as possible**â€

â€‹		 ï‚® This means that if you want to add a leaf node v at  level h, v 		  would need to be on the right of all the  existing leaf nodes.

#### Traversal

<img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20241119120509912.png" alt="image-20241119120509912" style="zoom:60%;" />





* level traversal:   å¹¿åº¦ä¼˜å…ˆæœç´¢

  top to bottom left to right

  26 12 32 4 18 14 24  (use queue to utilize)

* Preorder traversal 

  root , left , right

  26 12 4 18 14 24 32

* Inorder traversal

  left root right

  4 12 14 18 24 26 32

* Postorder traversal

  left right root

  4 14 24 18 12 32 26

We can rebuild this tree by these traversal.

**Preorder Traversal**

 ï‚² Implementation: 

ï‚³ Recursive Implementation? So easy? 

```c
preorderprint(treeNode root): 
 print(root) 
 if(root->left!=null) 
 	preorderprint(root->left) 
 if(root->right!=null) 
 	preorderprint(root->right)
```

```c
preorderiterative(treeNode root):
 treeNode stack s
 s.push(root)
 while(s!=empty)
 treeNode node= s.top()
 print(node)
 s.pop()
 if(node->right!=null)
 s.push(node->right)
 if(node->left!=null)
 s.push(node->left)
//åˆ‡æ¢popï¼Œå·¦å³çš„ä½ç½®å…³ç³»å¯ä»¥å®ç°ä¸åŒtraversal!!
```

**Postorder traversal**

**é€»è¾‘ï¼š**

- ç¬¬ä¸€ä¸ªæ ˆç”¨äºæŒ‰ "æ ¹ -> å³ -> å·¦" é¡ºåºéå†èŠ‚ç‚¹ã€‚
- ç¬¬äºŒä¸ªæ ˆç”¨äºå­˜å‚¨é€†åºçš„éå†ç»“æœï¼Œæœ€ç»ˆç›´æ¥é€†åºè¾“å‡ºå³ä¸ºååºç»“æœã€‚

```plaintext
postorderTraversalTwoStack(root):
    if root is null:
        return []

    stack1 = []  # ç”¨äºéå†
    stack2 = []  # ç”¨äºå­˜å‚¨ç»“æœ
    result = []
    stack1.push(root)
    while stack1 is not empty:
        node = stack1.pop()
        stack2.push(node)
        # å·¦å­æ ‘å…ˆå…¥æ ˆï¼Œä¿è¯å³å­æ ‘å…ˆå¤„ç†
        if node.left is not null:
            stack1.push(node.left)
        if node.right is not null:
            stack1.push(node.right)
    # ä»stack2ä¾æ¬¡è¾“å‡ºååºç»“æœ
    while stack2 is not empty:
        result.append(stack2.pop().value)

    return result
```

----



### Caculater

<img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20241126105701267.png" alt="image-20241126105701267" style="zoom:60%;" />

Postorder çš„å®ç°ç±»ä¼¼äºæ ˆå®ç°è®¡ç®—å™¨ï¼ŒæŠŠå·¦è¾¹å¶å­pushè¿›å»ï¼Œçˆ¶èŠ‚ç‚¹è¿ç®—åæŠŠç»“æœå‹å…¥æ ˆã€‚

### Character Encoding

**Fixed encoding**

ï‚² A character encoding maps each character to a  number 

ï‚² Computers usually use fixed-length character  encodings 

ï‚³ ASCII uses 8 bits per character  ï‚³ Unicode uses 16 bits per character 

 ï‚® All character encodings have the same length 

ï‚® A given character always has the same encoding

 ï‚³ Problem: fixed length encoding waste space ï‚® Solution: a variable-length encoding

**Huffman tree**

1. use encodings of different lengths for different characters.
2. Assign shorter encodings to frequently occurring characters
3. **Requirement**: no characterâ€™s encoding can be the **prefix **of another characterâ€™s encoding (e.g., couldnâ€™t  have 00 and 001)     é˜²æ­¢åŒºåˆ†ä¸æ¸…

<img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20241126112921820.png" alt="image-20241126112921820" style="zoom:50%;" />

### **å“ˆå¤«æ›¼æ ‘çš„æ„å»ºæ­¥éª¤**

1. **ç»Ÿè®¡å­—ç¬¦é¢‘ç‡**ï¼š
   - ä»æ–‡æœ¬ä¸­è¯»å–å­—ç¬¦å¹¶ç»Ÿè®¡æ¯ä¸ªå­—ç¬¦çš„å‡ºç°é¢‘ç‡ã€‚
2. **åˆ›å»ºåˆå§‹èŠ‚ç‚¹åˆ—è¡¨**ï¼š
   - ä¸ºæ¯ä¸ªå­—ç¬¦åˆ›å»ºä¸€ä¸ªèŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹ä¸­åŒ…å«è¯¥å­—ç¬¦åŠå…¶é¢‘ç‡ã€‚
   - è¿™äº›èŠ‚ç‚¹å°†ç”¨äºæ„å»ºå“ˆå¤«æ›¼æ ‘ã€‚
3. **åˆå¹¶æœ€ä½é¢‘ç‡çš„ä¸¤ä¸ªèŠ‚ç‚¹**ï¼š
   - ä»èŠ‚ç‚¹åˆ—è¡¨ä¸­æ‰¾å‡º**é¢‘ç‡æœ€ä½çš„ä¸¤ä¸ªèŠ‚ç‚¹**ã€‚
   - å°†å®ƒä»¬åˆå¹¶ä¸ºä¸€ä¸ªæ–°èŠ‚ç‚¹ï¼Œè¯¥èŠ‚ç‚¹çš„é¢‘ç‡æ˜¯ä¸¤ä¸ªå­èŠ‚ç‚¹é¢‘ç‡ä¹‹å’Œã€‚
   - æ–°èŠ‚ç‚¹çš„å·¦å³å­èŠ‚ç‚¹åˆ†åˆ«æ˜¯åˆšåˆšåˆå¹¶çš„ä¸¤ä¸ªèŠ‚ç‚¹ã€‚
4. **å°†æ–°èŠ‚ç‚¹åŠ å…¥èŠ‚ç‚¹åˆ—è¡¨**ï¼š
   - å°†æ–°åˆå¹¶çš„çˆ¶èŠ‚ç‚¹æ·»åŠ å›èŠ‚ç‚¹åˆ—è¡¨ä¸­ï¼Œç»§ç»­æ„å»ºã€‚
5. **é‡å¤åˆå¹¶ç›´åˆ°åªå‰©ä¸€ä¸ªèŠ‚ç‚¹**ï¼š
   - ä¸æ–­é‡å¤**æ­¥éª¤3**å’Œ**æ­¥éª¤4**ï¼Œç›´åˆ°åˆ—è¡¨ä¸­åªå‰©ä¸€ä¸ªèŠ‚ç‚¹ã€‚
   - æœ€ç»ˆå‰©ä¸‹çš„èŠ‚ç‚¹å³ä¸ºå“ˆå¤«æ›¼æ ‘çš„æ ¹èŠ‚ç‚¹ã€‚

------

### **ç¤ºä¾‹ï¼šæ„å»ºå“ˆå¤«æ›¼æ ‘**

ç»™å®šä¸€ç»„å­—ç¬¦å’Œå…¶å¯¹åº”é¢‘ç‡ï¼š

| å­—ç¬¦ | Z    | K    | F    | C    | U    | D    | L    | E    |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| é¢‘ç‡ | 2    | 7    | 10   | 12   | 27   | 30   | 43   | 65   |

#### æ­¥éª¤ç¤ºä¾‹ï¼š

1. **åˆå§‹çŠ¶æ€**ï¼š
   - å°†æ‰€æœ‰å­—ç¬¦å’Œé¢‘ç‡ä½œä¸ºç‹¬ç«‹èŠ‚ç‚¹åŠ å…¥èŠ‚ç‚¹åˆ—è¡¨ã€‚
2. **ç¬¬ä¸€æ¬¡åˆå¹¶**ï¼š
   - é¢‘ç‡æœ€å°çš„ä¸¤ä¸ªèŠ‚ç‚¹ä¸º `Z (2)` å’Œ `K (7)`ã€‚
   - åˆå¹¶ä¸ºæ–°èŠ‚ç‚¹ï¼Œé¢‘ç‡ä¸º `2 + 7 = 9`ã€‚
   - æ–°èŠ‚ç‚¹åŠ å…¥åˆ—è¡¨ä¸­ï¼Œå‰©ä½™èŠ‚ç‚¹é¢‘ç‡ä¸ºï¼š `9, 10, 12, 27, 30, 43, 65`ã€‚
3. **ç¬¬äºŒæ¬¡åˆå¹¶**ï¼š
   - é¢‘ç‡æœ€å°çš„ä¸¤ä¸ªèŠ‚ç‚¹ä¸º `9` å’Œ `F (10)`ã€‚
   - åˆå¹¶ä¸ºæ–°èŠ‚ç‚¹ï¼Œé¢‘ç‡ä¸º `9 + 10 = 19`ã€‚
   - æ–°èŠ‚ç‚¹åŠ å…¥åˆ—è¡¨ä¸­ï¼Œå‰©ä½™èŠ‚ç‚¹é¢‘ç‡ä¸ºï¼š `19, 12, 27, 30, 43, 65`ã€‚
4. **é‡å¤ä»¥ä¸Šæ­¥éª¤**ï¼š
   - ç»§ç»­åˆå¹¶é¢‘ç‡æœ€å°çš„ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œç›´åˆ°æœ€åå‰©ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸ºæ ¹èŠ‚ç‚¹ã€‚

----

**æ„å»ºå“ˆå¤«æ›¼æ ‘çš„å…³é”®ç‚¹**

- æ¯æ¬¡åˆå¹¶éƒ½ä¿è¯é€‰æ‹©é¢‘ç‡æœ€å°çš„ä¸¤ä¸ªèŠ‚ç‚¹ã€‚
- åˆå¹¶è¿‡ç¨‹å¯ä»¥ç”¨ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆæœ€å°å †ï¼‰ä¼˜åŒ–ï¼Œä»¥é«˜æ•ˆé€‰æ‹©æœ€å°é¢‘ç‡çš„èŠ‚ç‚¹ã€‚
- å“ˆå¤«æ›¼æ ‘ç”¨äºç¼–ç å­—ç¬¦æ—¶ï¼Œ**å·¦åˆ†æ”¯è¡¨ç¤º 0ï¼Œå³åˆ†æ”¯è¡¨ç¤º 1**ã€‚



## Advanced Tree

<img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20241126114841634.png" alt="image-20241126114841634" style="zoom:40%;" />

### Binary Heap

<img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20241126114644236.png" alt="image-20241126114644236" style="zoom:45%;" />

**å®Œå…¨æ ‘ï¼ŒèŠ‚ç‚¹æœ‰å”¯ä¸€å€¼ï¼Œæ¯ä¸€ä¸ªä¸­é—´èŠ‚ç‚¹éƒ½æ¯”ä»–çš„å­©å­å°**



**Insert Node** O(log n)

æ’å…¥æ“ä½œä¸»è¦åŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼š

1. **åœ¨æ ‘çš„åº•éƒ¨æŒ‰é¡ºåºæ’å…¥æ–°èŠ‚ç‚¹**ï¼ˆä¿æŒå®Œå…¨äºŒå‰æ ‘çš„æ€§è´¨ï¼‰ã€‚
2. **è°ƒæ•´å †åº**ï¼ˆé€šè¿‡ä¸Šæµ®æ“ä½œä¿®å¤å †åºæ€§è´¨ï¼‰ã€‚

ä¼ªä»£ç å¦‚ä¸‹ï¼š

**æ­¥éª¤ 1ï¼šåœ¨æ ‘çš„åº•éƒ¨æ’å…¥èŠ‚ç‚¹**

- åˆ›å»ºä¸€ä¸ªæ–°èŠ‚ç‚¹ `z`ï¼Œå€¼ä¸º `e`ã€‚
- å°† `z` æ’å…¥åˆ°äºŒå‰å †ä¸­å”¯ä¸€å¯èƒ½çš„ä½ç½®ï¼Œç¡®ä¿æ ‘ä»ç„¶æ˜¯**å®Œå…¨äºŒå‰æ ‘**ã€‚

**æ­¥éª¤ 2ï¼šä¸Šæµ®æ“ä½œï¼ˆHeapify-Upï¼‰**

1. åˆå§‹åŒ–æŒ‡é’ˆ `u` æŒ‡å‘æ–°æ’å…¥çš„èŠ‚ç‚¹ `z`ã€‚

2. å¦‚æœ `u` æ˜¯æ ¹èŠ‚ç‚¹ï¼Œåœæ­¢æ“ä½œï¼ˆå †åºæ€§è´¨å·²æ»¡è¶³ï¼‰ã€‚

3. å¦åˆ™ï¼Œæ¯”è¾ƒ 

   ```
   u
   ```

    çš„å€¼ä¸å…¶çˆ¶èŠ‚ç‚¹ 

   ```
   p
   ```

    çš„å€¼ï¼š

   - å¦‚æœ `u.key >= p.key`ï¼ˆæœ€å°å †ï¼‰æˆ– `u.key <= p.key`ï¼ˆæœ€å¤§å †ï¼‰ï¼Œæˆ–è€…å·²ç»åˆ°äº†é¡¶å †ã€‚
   - åœæ­¢æ“ä½œï¼Œå †åºå·²æ»¡è¶³ã€‚
   - å¦åˆ™ï¼Œäº¤æ¢ `u` å’Œ `p` çš„å€¼ã€‚

4. å°† `u` æ›´æ–°ä¸º `p`ï¼Œé‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œç›´åˆ°å †åºæ¢å¤æˆ–åˆ°è¾¾æ ¹èŠ‚ç‚¹ã€‚



 **åˆ é™¤æœ€å°å€¼çš„æ“ä½œæ­¥éª¤**

1. åˆ é™¤å †ä¸­æœ€å°çš„å…ƒç´ ï¼ˆæ ¹èŠ‚ç‚¹ï¼‰ã€‚
2. ç”¨å †ä¸­æœ€åä¸€ä¸ªå¶èŠ‚ç‚¹çš„å€¼æ›¿æ¢æ ¹èŠ‚ç‚¹ã€‚
3. è‡ªä¸Šè€Œä¸‹ï¼ˆä»æ ¹åˆ°å¶ï¼‰è°ƒæ•´å †åºï¼ˆä¸‹æ²‰æ“ä½œï¼ŒHeapify-Downï¼‰ï¼Œä½¿å †é‡æ–°æ»¡è¶³æœ€å°å †çš„æ€§è´¨ã€‚

**è¯¦ç»†æ­¥éª¤ï¼š**

1. **æŠ¥å‘Šæ ¹èŠ‚ç‚¹çš„å€¼**ï¼š

   - å› ä¸ºæ ¹èŠ‚ç‚¹æ˜¯å †ä¸­çš„æœ€å°å€¼ï¼Œç›´æ¥å°†å…¶è¾“å‡ºã€‚

2. **æ‰¾åˆ°åº•éƒ¨çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹**ï¼š

   - æ‰¾åˆ°å †ä¸­**æœ€åä¸€ä¸ªèŠ‚ç‚¹**ï¼ˆå³ä¸‹è§’å¶å­ï¼‰ï¼Œå®ƒæ˜¯åº•å±‚æœ€å³ä¾§çš„èŠ‚ç‚¹ã€‚

3. **åˆ é™¤æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°†å…¶å€¼æ”¾åˆ°æ ¹èŠ‚ç‚¹**ï¼š

   - åˆ é™¤æœ€åä¸€ä¸ªèŠ‚ç‚¹ `z`ï¼Œå°†å…¶å€¼æ›¿æ¢åˆ°æ ¹èŠ‚ç‚¹çš„ä½ç½®ã€‚

4. **å¼€å§‹è°ƒæ•´å †åºï¼ˆä¸‹æ²‰æ“ä½œï¼ŒHeapify-Downï¼‰ï¼š**

   - å¦‚æœå½“å‰èŠ‚ç‚¹ `u` æ˜¯å¶èŠ‚ç‚¹ï¼Œåœæ­¢è°ƒæ•´ï¼ˆå †å·²æ»¡è¶³æ€§è´¨ï¼‰ã€‚

   - å¦åˆ™ï¼Œæ£€æŸ¥ 

     ```
     u
     ```

      çš„ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼š

     - å¦‚æœ `u` çš„å€¼å°äºä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œå †åºå·²æ»¡è¶³ï¼Œåœæ­¢æ“ä½œã€‚
     - å¦åˆ™ï¼Œä¸å€¼è¾ƒå°çš„å­èŠ‚ç‚¹äº¤æ¢ä½ç½®ã€‚

   - å°†æŒ‡é’ˆ `u` æ›´æ–°ä¸ºäº¤æ¢åçš„å­èŠ‚ç‚¹ï¼Œé‡å¤è°ƒæ•´ï¼Œç›´åˆ°å †åºæ»¡è¶³.

   **å¦‚ä½•æ‰¾ç¬¬nå¤§çš„æ•°ï¼ŒæŠŠnè½¬æ¢ä¸ºäºŒè¿›åˆ¶æ•°ï¼Œç„¶åæ ¹æ®0å·¦1å³å°±å¯ä»¥æ‰¾åˆ°è¿™ä¸ªæ•°**

   <img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20241126121344645.png" alt="image-20241126121344645" style="zoom:50%;" />





<img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20241126121423113.png" alt="image-20241126121423113" style="zoom:50%;" />



* **å®Œå…¨äºŒå‰æ ‘çš„æ•°ç»„è¡¨ç¤ºï¼š**

  - æ ‘çš„æ ¹èŠ‚ç‚¹ `u` å­˜å‚¨åœ¨ `A[1]` ä½ç½®ã€‚

  - å¯¹äºä»»ä½•å­˜å‚¨åœ¨ `A[i]` çš„èŠ‚ç‚¹ `u`ï¼Œå®ƒçš„ **å·¦å­èŠ‚ç‚¹** å­˜å‚¨åœ¨ `A[2i]` ä½ç½®ã€‚

  - å®ƒçš„ **å³å­èŠ‚ç‚¹** å­˜å‚¨åœ¨ `A[2i + 1]` ä½ç½®ã€‚

* **ä¸ºä»€ä¹ˆå·¦å­èŠ‚ç‚¹åœ¨ `A[2i]`ï¼š**

  - å®Œå…¨äºŒå‰æ ‘çš„èŠ‚ç‚¹æ˜¯æŒ‰å±‚æ¬¡é¡ºåºå­˜å‚¨çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒèŠ‚ç‚¹æŒ‰ä»ä¸Šåˆ°ä¸‹ã€ä»å·¦åˆ°å³çš„é¡ºåºæ’åˆ—ã€‚

  - å¦‚æœèŠ‚ç‚¹ `u` å­˜å‚¨åœ¨ä½ç½® `i`ï¼Œé‚£ä¹ˆåœ¨ `u` å‰é¢å·²ç»æœ‰ `i-1` ä¸ªèŠ‚ç‚¹ã€‚

  - `u` çš„å·¦å­èŠ‚ç‚¹æ˜¯ `u` çš„å·¦å­æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œå¹¶ä¸”å®ƒä¸€å®šä½äº `u` ä¹‹åçš„ç¬¬ä¸€ä¸ªä½ç½®ã€‚ç”±äºå®Œå…¨äºŒå‰æ ‘çš„ç»“æ„ï¼Œå·¦å­èŠ‚ç‚¹çš„ç´¢å¼•åº”è¯¥æ˜¯ `2i`ã€‚

* **ä¸ºä»€ä¹ˆå³å­èŠ‚ç‚¹åœ¨ `A[2i+1]`ï¼š**

  - åŒç†ï¼Œå³å­èŠ‚ç‚¹åœ¨å·¦å­èŠ‚ç‚¹ä¹‹åï¼Œä¹Ÿå°±æ˜¯å­˜å‚¨åœ¨ `A[2i+1]`ã€‚

  - è¿™æ ·ï¼Œæ•°ç»„ä¸­çš„èŠ‚ç‚¹å¯ä»¥æŒ‰å±‚æ¬¡é¡ºåºï¼Œä¾æ¬¡å­˜å‚¨æ¯ä¸ªèŠ‚ç‚¹åŠå…¶å­æ ‘ã€‚

  

  **The following is an immediate corollary of the previous  lemma: **

  **æ¨è®º**ï¼šå‡è®¾äºŒå‰æ ‘ `T` ä¸­çš„èŠ‚ç‚¹ `u` å­˜å‚¨åœ¨æ•°ç»„ `A[i]` ä½ç½®ï¼Œé‚£ä¹ˆèŠ‚ç‚¹ `u` çš„**çˆ¶èŠ‚ç‚¹**å­˜å‚¨åœ¨æ•°ç»„ `A[i//2]` ä½ç½®ã€‚(å‘ä¸‹å–æ•´)

  **å¼•ç†**ï¼šåœ¨å®Œå…¨äºŒå‰æ ‘ä¸­ï¼Œæœ€åº•å±‚æœ€å³è¾¹çš„å¶å­èŠ‚ç‚¹å­˜å‚¨åœ¨æ•°ç»„ `A[n]` ä½ç½®ï¼Œå…¶ä¸­ `n` æ˜¯æ ‘ä¸­çš„æ€»èŠ‚ç‚¹æ•°ã€‚

  ç”±è¿™å‡ ä¸ªå®šç†ï¼Œè¿ç”¨æ•°ç»„è¿›è¡Œå»ºå †

  <img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20241203110237736.png" alt="image-20241203110237736" style="zoom:50%;" />

  <img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20241203110349170.png" alt="image-20241203110349170" style="zoom:50%;" />

Create an array A that stores a set S of n integers, we  can turn A into a  **binary heap** on S using the  following simple algorithm, which view A as a  complete binary tree T:

```
 For each i=n downto 1: 
 	 Perform root-fix on the subtree of T rooted at A[i]
```



 <img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20241203113137620.png" alt="image-20241203113137620" style="zoom:50%;" />



<img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20241203113200668.png" alt="image-20241203113200668" style="zoom:50%;" />

é”™ä½ç›¸å‡æ³•ï¼Œå¯ä»¥è¯æ˜å¤æ‚åº¦æ˜¯çº¿æ€§ã€‚

### BST

<img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20241203114356052.png" alt="image-20241203114356052" style="zoom:50%;" />

Predecessor Query , Successor Query time complexity: **O(h)** h be the height of this tree

Insertion and delete: **O(n)**

#### å‰é©±æŸ¥è¯¢ï¼ˆPredecessor Queryï¼‰

åœ¨ä¸€ä¸ªäºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰ä¸Šï¼Œç»™å®šä¸€ä¸ªæ•´æ•°é›† `S` å’Œä¸€ä¸ªæŸ¥è¯¢å€¼ `q`ï¼Œæˆ‘ä»¬è¦æ‰¾åˆ° `q` çš„ **å‰é©±èŠ‚ç‚¹**ï¼ˆpredecessorï¼‰ã€‚å‰é©±èŠ‚ç‚¹æ˜¯æ ‘ä¸­ **å°äº `q` çš„æœ€å¤§èŠ‚ç‚¹**ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœäºŒå‰æœç´¢æ ‘çš„èŠ‚ç‚¹æ˜¯ `[20, 10, 30, 5, 15, 25, 35]`ï¼Œé‚£ä¹ˆå¯¹äºæŸ¥è¯¢ `q = 15`ï¼Œå‰é©±èŠ‚ç‚¹åº”è¯¥æ˜¯ `10`ï¼Œå› ä¸º `10` æ˜¯å°äº `15` çš„æœ€å¤§å€¼ã€‚

**ç®—æ³•æ­¥éª¤**

1. **åˆå§‹åŒ–å‰é©±èŠ‚ç‚¹**ï¼š
   - è®¾å®š `p = -âˆ`ï¼Œå³åˆå§‹çš„å‰é©±å€¼ä¸ºä¸€ä¸ªæ— ç©·å°çš„å€¼ï¼Œè¡¨ç¤ºè¿˜æ²¡æœ‰æ‰¾åˆ°å‰é©±ã€‚
2. **ä»æ ¹èŠ‚ç‚¹å¼€å§‹éå†**ï¼š
   - è®¾å®š `u` ä¸ºæ ‘çš„æ ¹èŠ‚ç‚¹ã€‚
3. **åˆ¤æ–­å½“å‰èŠ‚ç‚¹**ï¼š
   - **å¦‚æœ `u` ä¸º `nil`**ï¼ˆå³å½“å‰èŠ‚ç‚¹ä¸ºç©ºï¼‰ï¼Œåˆ™è¡¨ç¤ºæŸ¥è¯¢ç»“æŸï¼Œè¿”å›å½“å‰çš„å‰é©± `p`ã€‚
   - **å¦‚æœ `u` çš„å€¼ç­‰äº `q`**ï¼Œåˆ™ç›´æ¥å°†å‰é©± `p` è®¾ç½®ä¸º `q`ï¼Œå¹¶è¿”å› `p`ã€‚
   - **å¦‚æœ `u` çš„å€¼å¤§äº `q`**ï¼Œé‚£ä¹ˆè¯´æ˜ `q` åº”è¯¥åœ¨å·¦å­æ ‘ä¸­ã€‚å°† `u` è®¾ç½®ä¸º `u` çš„å·¦å­èŠ‚ç‚¹ï¼Œç»§ç»­å‘å·¦å­æ ‘éå†ã€‚
   - **å¦åˆ™ï¼Œ`u` çš„å€¼å°äº `q`**ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥æ›´æ–°å‰é©±èŠ‚ç‚¹ `p` ä¸º `u` çš„å€¼ï¼Œå› ä¸ºæ­¤æ—¶ `u` å°äº `q`ï¼Œå¹¶ä¸”æ˜¯ç›®å‰ä¸ºæ­¢æœ€æ¥è¿‘ `q` çš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚ç„¶åå°† `u` è®¾ç½®ä¸º `u` çš„å³å­èŠ‚ç‚¹ï¼Œç»§ç»­å‘å³å­æ ‘éå†ã€‚
4. **ç»ˆæ­¢æ¡ä»¶**ï¼š
   - å½“éå†åˆ°ç©ºèŠ‚ç‚¹ï¼ˆ`nil`ï¼‰æ—¶ï¼Œè¿”å›å½“å‰çš„å‰é©±å€¼ `p`ã€‚

```
function predecessorQuery(T, q):
    p â† -âˆ  // åˆå§‹å‰é©±èŠ‚ç‚¹å€¼
    u â† root of T  // ä»æ ¹èŠ‚ç‚¹å¼€å§‹éå†

    while u â‰  nil:
        if u.key = q:
            p â† q  // å¦‚æœå½“å‰èŠ‚ç‚¹çš„å€¼ç­‰äº qï¼Œåˆ™å‰é©±å°±æ˜¯ q
            return p
        else if u.key > q:
            u â† left child of u  // å¦‚æœå½“å‰èŠ‚ç‚¹çš„å€¼å¤§äº qï¼Œåˆ™å»å·¦å­æ ‘æŸ¥æ‰¾
        else:
            p â† u.key  // å½“å‰èŠ‚ç‚¹å€¼å°äº qï¼Œæ›´æ–°å‰é©±ä¸ºå½“å‰èŠ‚ç‚¹
            u â† right child of u  // ç»§ç»­å‘å³å­æ ‘æŸ¥æ‰¾

    return p  // æœ€ç»ˆè¿”å›å‰é©±
```

<img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20241203120020635.png" alt="image-20241203120020635" style="zoom:33%;" />

åœ¨äºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰ä¸­ï¼Œ**åç»§ï¼ˆSuccessorï¼‰** å’Œ **å‰é©±ï¼ˆPredecessorï¼‰** æ˜¯ç›¸åçš„æ¦‚å¿µï¼š

- **åç»§èŠ‚ç‚¹**ï¼šç»™å®šä¸€ä¸ªæ•´æ•° `q`ï¼Œå®ƒçš„åç»§æ˜¯ BST ä¸­ **æœ€å°çš„** å¤§äºæˆ–ç­‰äº `q` çš„èŠ‚ç‚¹ã€‚å¦‚æœ `q` çš„å€¼å­˜åœ¨äºæ ‘ä¸­ï¼Œåˆ™åç»§å°±æ˜¯ `q` æœ¬èº«ï¼Œå¦åˆ™æ˜¯å¤§äº `q` çš„æœ€å°å€¼ã€‚
- å¦‚æœæ²¡æœ‰æ¯” `q` æ›´å¤§çš„å…ƒç´ ï¼Œåˆ™åç»§ä¸å­˜åœ¨ã€‚

#### åç»§æŸ¥è¯¢ï¼ˆSuccessorï¼‰

å‡è®¾é›†åˆ `S = {3, 10, 15, 20, 30, 40, 60, 73, 80}`ï¼Œå¯¹äºæŸ¥è¯¢ `q` çš„åç»§ï¼Œè¿”å›å¦‚ä¸‹ï¼š

- **`q = 23`** çš„åç»§æ˜¯ **`30`**ï¼Œå› ä¸º 30 æ˜¯å¤§äº 23 çš„æœ€å°å€¼ã€‚
- **`q = 15`** çš„åç»§æ˜¯ **`15`**ï¼Œå› ä¸º 15 æœ¬èº«å°±æ˜¯é›†åˆä¸­ç­‰äº `15` çš„æœ€å°å€¼ã€‚
- **`q = 81`** çš„åç»§ä¸å­˜åœ¨ï¼Œå› ä¸ºæ²¡æœ‰æ¯” 81 æ›´å¤§çš„å…ƒç´ ã€‚
- 

æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨äºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰ä¸­éå†æ¥æ‰¾åˆ°åç»§ã€‚åç»§æŸ¥è¯¢çš„ç®—æ³•ä¸å‰é©±æŸ¥è¯¢çš„ç®—æ³•æ˜¯å¯¹ç§°çš„ã€‚å³æ ¹æ® BST çš„æ€§è´¨ï¼Œåç»§æŸ¥è¯¢å¯ä»¥æŒ‰ç…§ä»¥ä¸‹è§„åˆ™è¿›è¡Œï¼š

1. **åˆå§‹åŒ–**ï¼šæˆ‘ä»¬ä»æ ¹èŠ‚ç‚¹å¼€å§‹éå† BSTï¼Œä½¿ç”¨ä¸€ä¸ªå˜é‡ `p` æ¥ä¿å­˜å½“å‰æ‰¾åˆ°çš„åç»§èŠ‚ç‚¹ã€‚
2. éå†:
   - å¦‚æœå½“å‰èŠ‚ç‚¹ `u` çš„å€¼ç­‰äº `q`ï¼Œé‚£ä¹ˆ `q` çš„åç»§å°±æ˜¯ `u`ï¼ˆå³å½“å‰èŠ‚ç‚¹ï¼‰ã€‚
   - å¦‚æœå½“å‰èŠ‚ç‚¹ `u` çš„å€¼å¤§äº `q`ï¼Œé‚£ä¹ˆ `u` å¯èƒ½æ˜¯ `q` çš„åç»§ï¼Œä½†æˆ‘ä»¬éœ€è¦ç»§ç»­å‘å·¦å­æ ‘éå†ï¼Œçœ‹çœ‹æ˜¯å¦èƒ½æ‰¾åˆ°æ›´å°çš„åç»§å€¼ã€‚
   - å¦‚æœå½“å‰èŠ‚ç‚¹ `u` çš„å€¼å°äº `q`ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ç»§ç»­å‘å³å­æ ‘éå†ï¼Œå› ä¸ºåç»§èŠ‚ç‚¹ä¸€å®šåœ¨å³å­æ ‘ä¸­ã€‚

#### Insert

<img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20241203120145623.png" alt="image-20241203120145623" style="zoom:50%;" />

æ‰¾åˆ°åˆé€‚çš„ä½ç½®æ’å…¥

#### Deletion

<img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20241203120339523.png" alt="image-20241203120339523" style="zoom:40%;" />

<img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20241203120411889.png" alt="image-20241203120411889" style="zoom:50%;" />

2.2ï¼šå› ä¸ºå¦‚æœæœ‰å·¦å­©å­ï¼Œsuccessorå°±æ˜¯ä»–ï¼Œæ‰€ä»¥ä¸€å®šåªæœ‰å³å­©å­ã€‚

æŠŠå³å­æ ‘çš„æ ¹èŠ‚ç‚¹ç›´æ¥è¦†ç›–æ‰äº¤æ¢åçš„vï¼ˆè¢«èµ‹å€¼ä¸ºè¦åˆ é™¤çš„successor node)

3: ä»–ä¸€å®šæ˜¯ä¸€ä¸ªä¸­é—´èŠ‚ç‚¹ï¼Œæœ‰å·¦å­æ ‘ï¼Œç›´æ¥æŠŠåšå­æ ‘çš„æ ¹è¦†ç›–æ‰vã€‚å³ç›´æ¥ç”¨å·¦å­æ ‘æ›¿æ¢å®ƒ

å¤æ‚åº¦åˆ†æï¼šcase2 æ˜¯O(n). case1 and case3 
